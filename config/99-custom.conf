# 99-custom.conf — Custom dnsmasq configuration for Pi-hole
#
# Placed in /etc/dnsmasq.d/ — loaded automatically by Pi-hole.
# Pi-hole's own config is in /etc/pihole/dnsmasq.conf (don't edit that).
#
# NOTE: Requires misc.etc_dnsmasq_d = true in pihole.toml (default in v6).
#
# Applied by: ./apply-config.sh

# ══════════════════════════════════════════════════════════════════════
# CONFIGURATION — Edit these examples to match your network
# ══════════════════════════════════════════════════════════════════════

# ──────────────────────────────────────────────────────────────
# Conditional forwarding — resolve local hostnames via your router
# ──────────────────────────────────────────────────────────────
# When a client asks for "myserver.lan", Pi-hole asks the router
# instead of sending it upstream (where it would fail).
#
# Syntax: server=/domain/router_ip
# Uncomment and adjust for your subnets:

# Example: 192.168.1.0/24 subnet
# server=/1.168.192.in-addr.arpa/192.168.1.1

# Example: 10.0.0.0/24 subnet
# server=/0.0.10.in-addr.arpa/10.0.0.1

# ──────────────────────────────────────────────────────────────
# Local DNS records — homelab devices
# ──────────────────────────────────────────────────────────────
# Faster than going through the router's DNS. Edit to match your hosts.
#
# Format: host-record=hostname,ip[,ipv6][,ttl]
#         address=/hostname/ip  (wildcards supported)

# Examples (uncomment and customize):
# host-record=nas.lan,192.168.1.2
# host-record=pihole.lan,192.168.1.53
# host-record=router.lan,192.168.1.1

# Wildcard example for multiple services
# address=/.homelab.lan/192.168.1.100

# ──────────────────────────────────────────────────────────────
# Performance tuning
# ──────────────────────────────────────────────────────────────

# Don't forward plain names (without a dot) — they're always local
domain-needed

# Never forward addresses in the non-routed address spaces
bogus-priv

# Reduce DNS amplification attack surface (may already be set by Pi-hole)
# Only answer queries from local subnets
# Uncomment if you want to restrict:
# interface=eth0
# bind-interfaces

# ──────────────────────────────────────────────────────────────
# DNSSEC — optional, validates upstream responses
# ──────────────────────────────────────────────────────────────
# Uncomment to enable DNSSEC validation.
# Requires upstream DNS to support DNSSEC (Cloudflare 1.1.1.1 does).
# Can cause slowdowns if misconfigured — test first.
#
# dnssec
# trust-anchor=.,20326,8,2,E06D44B80B8F1D39A95C0B0D7C65D08458E880409BBC683457104237C7F8EC8D
